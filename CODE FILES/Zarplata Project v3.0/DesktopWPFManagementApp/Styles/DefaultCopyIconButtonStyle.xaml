<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:fontawesome="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp">

    <Style x:Key="CopyIconButtonStyle"
           TargetType="Button">

        <Style.Setters>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="Gray"/>
            <Setter Property="ToolTipService.HasDropShadow" Value="True"/>
            <Setter Property="ToolTipService.InitialShowDelay" Value="1100"/>
            <Setter Property="ToolTipService.BetweenShowDelay" Value="2000"/>
            <Setter Property="ToolTipService.ToolTip">
                <Setter.Value>
                    <ToolTip
                        Background="Transparent"
                        BorderThickness="0">
                        <Border
                            Padding="15 10 15 10"
                            Background="{DynamicResource SecondaryBackColor}"
                            BorderBrush="{DynamicResource DefaultPrimaryButtonColor}"
                            BorderThickness="0"
                            CornerRadius="5"
                            Opacity="0.9">

                            <TextBlock
                                Text="Копировать"
                                FontSize="13"
                                FontWeight="Medium"
                                Foreground="LightGray"/>

                        </Border>
                    </ToolTip>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            Name="MainBorder"
                            Height="auto"
                            Width="auto"
                            Background="{TemplateBinding Background}"
                            Padding="1"
                            CornerRadius="5">

                            <Grid>
                                
                                <ContentControl 
                                    Name="MainControl"
                                    Content="{TemplateBinding Content}"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center">

                                </ContentControl>

                                <Popup
                                    x:Name="MainPopup"
                                    Width="Auto"
                                    Height="Auto"
                                    IsOpen="False"
                                    AllowsTransparency="True">

                                    <Border
                                        Padding="15 10 15 10"
                                        Background="{DynamicResource SecondaryBackColor}"
                                        BorderBrush="{DynamicResource DefaultPrimaryButtonColor}"
                                        BorderThickness="0"
                                        CornerRadius="5"
                                        Opacity="0.9">

                                        <StackPanel
                                            Orientation="Horizontal"
                                            Background="Transparent">
                                            <TextBlock
                                                Text="Скопировано"
                                                FontSize="13"
                                                FontWeight="Medium"
                                                Foreground="LightGray"/>

                                            <fontawesome:IconImage 
                                                Icon="Check"
                                                Width="13"
                                                Height="13"
                                                Foreground="LightGray"
                                                Margin="5 0 0 0">

                                            </fontawesome:IconImage>
                                        </StackPanel>

                                    </Border>
                                    
                                </Popup>
                            </Grid>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="MainBorder" Property="Padding" Value="0"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="MainBorder" Property="Padding" Value="1"/>

                                <Trigger.EnterActions>
                                    <BeginStoryboard x:Name="OpenPopupStoryBoard">
                                        <Storyboard>
                                            
                                            <BooleanAnimationUsingKeyFrames 
                                                Storyboard.TargetName="MainPopup"
                                                Storyboard.TargetProperty="IsOpen" 
                                                FillBehavior="HoldEnd">
                                                
                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0.25" Value="True"/>
                                                <DiscreteBooleanKeyFrame KeyTime="0:0:1.25" Value="False"/>
                                                
                                            </BooleanAnimationUsingKeyFrames>
                                            
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>

                                <Trigger.ExitActions>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
        
    </Style>
    
</ResourceDictionary>