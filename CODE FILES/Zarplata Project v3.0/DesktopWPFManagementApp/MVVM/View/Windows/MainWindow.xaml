<Window x:Class="DesktopWPFManagementApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:fontawesome="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        xmlns:windows="clr-namespace:DesktopWPFManagementApp.MVVM.ViewModel.Windows"
        xmlns:local="clr-namespace:DesktopWPFManagementApp"
        mc:Ignorable="d"
        Title="Zarplata Management Client" Height="650" Width="1200"
        MinHeight="650" MinWidth="1200"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <windows:MainWindowViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVosibility" />
    </Window.Resources>

    <Window.Visibility>
        <Binding Path="IsViewVisible" Mode="TwoWay" Converter="{StaticResource BooleanToVosibility}" />
    </Window.Visibility>

    <Grid>

        <Border 
        Background="{StaticResource PrimaryBackColor}"
        CornerRadius="5"
        Margin="5">

            <!-- Animated connect status border -->
            <Border.Style>
                <Style TargetType="Border">

                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ServerConnectStatus, UpdateSourceTrigger=PropertyChanged}" Value="Connected" >
                            <DataTrigger.Setters>
                                <Setter Property="BorderBrush" Value="{DynamicResource SuccessConnectServerStatusBorderColor}"/>
                            </DataTrigger.Setters>

                            <DataTrigger.EnterActions>
                                <BeginStoryboard x:Name="AuthWindowMainBorderConnectSuccessBeginStoryboard">
                                    <Storyboard>
                                        <ThicknessAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="BorderThickness"
                                        BeginTime="0:0:0.0"
                                        Duration="0:0:0.200" 
                                        AutoReverse="True"
                                        RepeatBehavior="2x">

                                            <SplineThicknessKeyFrame KeyTime="0:0:0.000" Value="0 0 0 0" />
                                            <SplineThicknessKeyFrame KeyTime="0:0:0.200" Value="5 5 5 5" />

                                        </ThicknessAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="AuthWindowMainBorderConnectSuccessBeginStoryboard" />
                            </DataTrigger.ExitActions>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding ServerConnectStatus, UpdateSourceTrigger=PropertyChanged}" Value="NotConnected" >
                            <DataTrigger.Setters>
                                <Setter Property="BorderBrush" Value="{DynamicResource ErrorConnectServerStatusBorderColor}"/>
                            </DataTrigger.Setters>

                            <DataTrigger.EnterActions>
                                <BeginStoryboard x:Name="AuthWindowMainBorderConnectErrorBeginStoryboard">
                                    <Storyboard>
                                        <ThicknessAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="BorderThickness"
                                        BeginTime="0:0:0.0"
                                        Duration="0:0:0.200" 
                                        AutoReverse="True"
                                        RepeatBehavior="2x">

                                            <SplineThicknessKeyFrame KeyTime="0:0:0.000" Value="0 0 0 0" />
                                            <SplineThicknessKeyFrame KeyTime="0:0:0.200" Value="5 5 5 5" />

                                        </ThicknessAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="AuthWindowMainBorderConnectErrorBeginStoryboard" />
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="40" />
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!--#region control drag panel -->
                <Border 
                Grid.Row="0"
                Background="{StaticResource SecondaryBackColor}"
                CornerRadius="5,5,0,0">

                    <DockPanel
                    x:Name="dragPanelBar"
                    Background="Transparent"
                    MouseLeftButtonDown="dragPanelBar_MouseLeftButtonDown"
                    MouseEnter="dragPanelBar_MouseEnter">

                        <!--#region Logo -->
                        <StackPanel 
                        x:Name="Logo"
                        Grid.Column="0"
                        Orientation="Horizontal"
                        FlowDirection="LeftToRight"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        DockPanel.Dock="Left">

                            <TextBlock 
                            x:Name="LogoTextBlockZ"
                            Text="Z"
                            Foreground="White"
                            Background="{StaticResource DefaultPrimaryButtonColor}"
                            FontSize="14"
                            FontWeight="ExtraBold"
                            FontStyle="Normal"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Left"
                            Margin="10 0 0 0"
                            Width="20"
                            Height="20"
                            TextAlignment="Center">

                                <TextBlock.Clip>
                                    <RectangleGeometry 
                                    RadiusX="5"
                                    RadiusY="5"
                                    Rect="0,0,20,20">
                                    </RectangleGeometry>
                                </TextBlock.Clip>
                            </TextBlock>

                            <TextBlock 
                            x:Name="LogoTextBlockLast"
                            Text="Зарплата"
                            Foreground="White"
                            Background="Transparent"
                            FontSize="14"
                            FontWeight="Bold"
                            FontStyle="Normal"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Left"
                            Margin="5 0 0 0"
                            Width="Auto"
                            Height="20"
                            TextAlignment="Center">
                            </TextBlock>
                        </StackPanel>

                        <!-- Еще можно было сделать так:
                                    <Border 
                        CornerRadius="5"
                        Width="30"
                        Height="30"
                        Background="{StaticResource PrimaryButtonColor}">

                        <TextBlock
                            Text="Z"
                            Foreground="White"
                            Background="Transparent"
                            FontSize="20"
                            FontWeight="ExtraBold"
                            FontStyle="Normal"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Left"
                            Margin="0 0 0 0"
                            Width="30"
                            Height="30"
                            TextAlignment="Center">

                        </TextBlock>
                        
                    </Border>
                -->
                        <!--#endregion End Logo -->

                        <!--#region control buttons -->
                        <StackPanel
                        x:Name="ControlButtons"
                        Grid.Column="1"
                        Orientation="Horizontal"
                        FlowDirection="RightToLeft"
                        HorizontalAlignment="Right"
                        Margin="0,0,5,0"
                        DockPanel.Dock="Right">

                            <Button
                            x:Name="ButtonCloseApp"
                            Click="ButtonCloseApp_Click"
                            Width="30"
                            Height="30"
                            Style="{StaticResource WindowControlBtnStyle}">

                                <fontawesome:IconImage 
                                Icon="Xmark" 
                                Foreground="{DynamicResource DefaultForegroundWindowControlButtonIconColor}"
                                Height="15"
                                Width="15" />

                            </Button>

                            <Button
                            x:Name="ButtonMaximizeApp"
                            Click="ButtonMaximizeApp_Click"
                            Width="30"
                            Height="30"
                            Style="{StaticResource WindowControlBtnStyle}">

                                <fontawesome:IconImage 
                                Icon="WindowMaximize" 
                                Foreground="{DynamicResource DefaultForegroundWindowControlButtonIconColor}"
                                Height="15"
                                Width="15" />

                            </Button>

                            <Button
                            x:Name="ButtonMinimizeApp"
                            Click="ButtonMinimizeApp_Click"
                            Width="30"
                            Height="30"
                            Style="{StaticResource WindowControlBtnStyle}">

                                <fontawesome:IconImage 
                                Icon="WindowMinimize" 
                                Foreground="{DynamicResource DefaultForegroundWindowControlButtonIconColor}"
                                Height="15"
                                Width="15" />

                            </Button>

                        </StackPanel>
                        <!--#endregion control buttons -->

                    </DockPanel>

                </Border>
                <!--#endregion control drag panel -->

                <!--#region Main Menu and Main Content | Child Views -->
                <Border
                    Name="MainMenuAndMainContentBorder"
                    Grid.Row="1">

                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Setters>
                                <Setter Property="Effect">
                                    <Setter.Value>
                                        <BlurEffect Radius="0" />
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="BorderThickness" Value="0 0 0 0"/>
                                <Setter Property="BorderBrush" Value="Transparent"/>
                            </Style.Setters>

                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsRefreshSessionPopupPanelOpen, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}" Value="true">
                                    <DataTrigger.Setters>
                                        <Setter Property="Effect">
                                            <Setter.Value>
                                                <BlurEffect Radius="30"/>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger.Setters>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>

                    <Grid>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="50" />
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!--#region Main Menu  -->
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Orientation="Horizontal" Grid.Column="0" FlowDirection="LeftToRight">

                                    <RadioButton
                        Name="MainMenuRadioButton_Analytics"
                        GroupName="MainMenuButton"
                        Width="150"
                        Style="{StaticResource MainMenuBtnDefaultStyle}"
                        Command="{Binding openAnalyticsPanelCommand}"
                                        IsChecked="True">

                                        <StackPanel
                            Orientation="Horizontal">

                                            <fontawesome:IconImage Icon="ChartPie">
                                                <fontawesome:IconImage.Style>
                                                    <Style TargetType="fontawesome:IconImage">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultIconMenuButtonColor}" />
                                                            <Setter Property="Width" Value="20"/>
                                                            <Setter Property="Height" Value="20"/>
                                                            <Setter Property="Margin" Value="25,0,0,0"/>
                                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>

                                                        </Style.Setters>

                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Analytics, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Analytics, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </fontawesome:IconImage.Style>
                                            </fontawesome:IconImage>
                                            <TextBlock Text="Аналитика">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultForegroundMenuButtonColor}"/>
                                                            <Setter Property="FontFamily" Value="Montserrat"/>
                                                            <Setter Property="FontWeight" Value="Medium"/>
                                                            <Setter Property="FontSize" Value="13"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                                            <Setter Property="HorizontalAlignment" Value="Left"/>
                                                            <Setter Property="Margin" Value="10,0,0,0"/>

                                                        </Style.Setters>
                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Analytics, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Analytics, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>

                                        </StackPanel>

                                    </RadioButton>

                                    <RadioButton
                        Name="MainMenuRadioButton_Tasks"
                        GroupName="MainMenuButton"
                        Width="150"
                        Style="{StaticResource MainMenuBtnDefaultStyle}"
                        Command="{Binding openTasksPanelCommand}">

                                        <StackPanel
                            Orientation="Horizontal">

                                            <fontawesome:IconImage Icon="ListCheck">
                                                <fontawesome:IconImage.Style>
                                                    <Style TargetType="fontawesome:IconImage">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultIconMenuButtonColor}" />
                                                            <Setter Property="Width" Value="20"/>
                                                            <Setter Property="Height" Value="20"/>
                                                            <Setter Property="Margin" Value="32,0,0,0"/>
                                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>

                                                        </Style.Setters>

                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Tasks, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Tasks, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </fontawesome:IconImage.Style>
                                            </fontawesome:IconImage>
                                            <TextBlock Text="Задания">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultForegroundMenuButtonColor}"/>
                                                            <Setter Property="FontFamily" Value="Montserrat"/>
                                                            <Setter Property="FontWeight" Value="Medium"/>
                                                            <Setter Property="FontSize" Value="13"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                                            <Setter Property="HorizontalAlignment" Value="Left"/>
                                                            <Setter Property="Margin" Value="10,0,0,0"/>

                                                        </Style.Setters>
                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Tasks, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Tasks, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>

                                        </StackPanel>

                                    </RadioButton>

                                    <RadioButton
                        Name="MainMenuRadioButton_Bots"
                        GroupName="MainMenuButton"
                        Width="160"
                        Style="{StaticResource MainMenuBtnDefaultStyle}"
                        Command="{Binding openBotsPanelCommand}">

                                        <StackPanel
                            Orientation="Horizontal">

                                            <fontawesome:IconImage Icon="Robot">
                                                <fontawesome:IconImage.Style>
                                                    <Style TargetType="fontawesome:IconImage">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultIconMenuButtonColor}" />
                                                            <Setter Property="Width" Value="20"/>
                                                            <Setter Property="Height" Value="20"/>
                                                            <Setter Property="Margin" Value="45,0,0,0"/>
                                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>

                                                        </Style.Setters>

                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Bots, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Bots, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </fontawesome:IconImage.Style>
                                            </fontawesome:IconImage>
                                            <TextBlock Text="Боты">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultForegroundMenuButtonColor}"/>
                                                            <Setter Property="FontFamily" Value="Montserrat"/>
                                                            <Setter Property="FontWeight" Value="Medium"/>
                                                            <Setter Property="FontSize" Value="13"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                                            <Setter Property="HorizontalAlignment" Value="Left"/>
                                                            <Setter Property="Margin" Value="10,0,0,0"/>

                                                        </Style.Setters>
                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Bots, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Bots, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>

                                        </StackPanel>

                                    </RadioButton>

                                    <RadioButton
                        Name="MainMenuRadioButton_Settings"
                        GroupName="MainMenuButton"
                        Width="160"
                        Style="{StaticResource MainMenuBtnDefaultStyle}"
                        Command="{Binding openSettingsPanelCommand}">

                                        <StackPanel
                            Orientation="Horizontal">

                                            <fontawesome:IconImage Icon="Gear">
                                                <fontawesome:IconImage.Style>
                                                    <Style TargetType="fontawesome:IconImage">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultIconMenuButtonColor}" />
                                                            <Setter Property="Width" Value="20"/>
                                                            <Setter Property="Height" Value="20"/>
                                                            <Setter Property="Margin" Value="25,0,0,0"/>
                                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>

                                                        </Style.Setters>

                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Settings, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Settings, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveIconMenuButtonColor}"/>
                                                                    <Setter Property="Height" Value="22"/>
                                                                    <Setter Property="Width" Value="22"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </fontawesome:IconImage.Style>
                                            </fontawesome:IconImage>
                                            <TextBlock Text="Настройки">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Setters>

                                                            <!-- Default Button State -->
                                                            <Setter Property="Foreground" Value="{DynamicResource DefaultForegroundMenuButtonColor}"/>
                                                            <Setter Property="FontFamily" Value="Montserrat"/>
                                                            <Setter Property="FontWeight" Value="Medium"/>
                                                            <Setter Property="FontSize" Value="13"/>
                                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                                            <Setter Property="HorizontalAlignment" Value="Left"/>
                                                            <Setter Property="Margin" Value="10,0,0,0"/>

                                                        </Style.Setters>
                                                        <Style.Triggers>

                                                            <!-- Mouse On Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Settings, Path=IsMouseOver}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource HoverForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                            <!-- Mouse Active Button State -->
                                                            <DataTrigger Binding="{Binding ElementName=MainMenuRadioButton_Settings, Path=IsChecked}" Value="True">
                                                                <DataTrigger.Setters>

                                                                    <Setter Property="Foreground" Value="{DynamicResource ActiveForegroundMenuButtonColor}" />
                                                                    <Setter Property="FontSize" Value="14"/>

                                                                </DataTrigger.Setters>
                                                            </DataTrigger>

                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>

                                        </StackPanel>

                                    </RadioButton>

                                </StackPanel>

                                <StackPanel Orientation="Horizontal" Grid.Column="1" FlowDirection="RightToLeft" VerticalAlignment="Center">

                                    <RadioButton
                        Name="MainMenuRadioButton_Profile"
                        GroupName="MainMenuButton"
                        Width="30"
                        Height="30"
                        Style="{StaticResource MenuProfileBtnStyle}"
                        ToolTip="Профиль"
                        Command="{Binding openProfilePanelCommand}">

                                        <fontawesome:IconImage Icon="UserSecret" Style="{StaticResource MainMenuProfileBtnIconDefaultStyle}" />

                                    </RadioButton>

                                </StackPanel>
                            </Grid>
                            <!--#endregion End Main Menu  -->

                            <!--#region Main Content | Child Views -->
                            <ContentControl
                        Grid.Row="1"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        Content="{Binding CurrentChildView}"
                        Margin="0"
                        Focusable="False">

                            </ContentControl>
                            <!--#endregion Main Content | Child Views -->

                        </Grid>

                        <Grid Name="GlassWallGrid">
                            <Grid.Style>
                                <Style TargetType="Grid">
                                    <Style.Setters>
                                        <Setter Property="Visibility" Value="Hidden"/>
                                        <Setter Property="Background" Value="#000e1b"/>
                                        <Setter Property="Opacity" Value="0.0"/>
                                    </Style.Setters>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsRefreshSessionPopupPanelOpen, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}" Value="true">
                                            <DataTrigger.Setters>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger.Setters>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>

                        </Grid>

                        <Popup Name="RefreshSessionPopup">
                            <Popup.Style>
                                <Style TargetType="Popup">
                                    <Style.Setters>
                                        <Setter Property="Width" Value="Auto"/>
                                        <Setter Property="Height" Value="Auto"/>
                                        <Setter Property="HorizontalAlignment" Value="Center"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="PlacementTarget" Value="{Binding MainMenuAndMainContentBorder}"/>
                                        <Setter Property="Placement" Value="Center"/>
                                        <Setter Property="AllowsTransparency" Value="True"/>
                                        <Setter Property="IsOpen" Value="{Binding IsRefreshSessionPopupPanelOpen, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}"/>
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Setter Property="StaysOpen" Value="True"/>
                                    </Style.Setters>
                                </Style>
                            </Popup.Style>

                            <!-- main code here -->
                            <Border
            Background="Transparent"
            CornerRadius="5 5 5 5"
            BorderThickness="0.5"
            BorderBrush="White"
            Padding="20"
            Visibility="Visible">

                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Style.Setters>
                                            <Setter Property="Width" Value="500"/>
                                            <Setter Property="Height" Value="230"/>
                                        </Style.Setters>

                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding TokenRefreshStatus}" Value="TokenIsRefreshing">
                                                <DataTrigger.Setters>
                                                    <Setter Property="Height" Value="180"/>
                                                </DataTrigger.Setters>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="10" />
                                        <RowDefinition Height="40" />
                                        <RowDefinition Height="10" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>

                                    <Border
                        Grid.Row="0"
                        Padding="5 0 5 0">

                                        <Grid>
                                            <StackPanel Orientation="Horizontal">
                                                <Image 
                                Width="25"
                                Height="25"
                            Source="{StaticResource RefreshExpiredSessionIconImg}"
                            HorizontalAlignment="Left" 
                            VerticalAlignment="Center"
                            Cursor="Hand">
                                                </Image>
                                                <TextBlock
                                Text="Время сессии истекло"
                                FontSize="17"
                                FontFamily="Arial"
                                FontWeight="SemiBold"
                                Foreground="Orange"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Left"
                                Margin="5 0 0 0">
                                                </TextBlock>
                                            </StackPanel>
                                        </Grid>

                                    </Border>

                                    <Border
                    Grid.Row="2"
                    Padding="5 0 0 0">

                                        <StackPanel Orientation="Horizontal">

                                            <TextBlock
                            Text="Вы все еще тут и хотите продлить сессию?"
                            FontSize="17"
                            FontFamily="Arial"
                            FontWeight="SemiBold"
                            Foreground="White"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Left"
                            Margin="0 0 0 0">
                                            </TextBlock>

                                        </StackPanel>

                                    </Border>

                                    <Grid 
                    Grid.Row="4">

                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>

                                        <Border
                        Grid.Row="0"
                        Background="Transparent"
                        Padding="5">

                                            <Button
                            Width="450"
                            Height="40"
                            HorizontalAlignment="Center"
                            FontSize="14"
                            FontFamily="Arial"
                            FontWeight="SemiBold"
                            Command="{Binding refreshSessionMainCommand}">

                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Style.Setters>
                                                            <Setter Property="Template" Value="{StaticResource DefaultButtonTemplate}"/>
                                                            <Setter Property="Background" Value="{DynamicResource SecondaryBackColor}" />
                                                            <Setter Property="Foreground" Value="DarkGray" />
                                                            <Setter Property="Cursor" Value="Hand" />
                                                            <Setter Property="Content">
                                                                <Setter.Value>
                                                                    <Grid>
                                                                        <TextBlock 
                                                        Name="RefreshSessionTextBlock"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Text="Да, продлить сессию">

                                                                            <TextBlock.Style>
                                                                                <Style TargetType="TextBlock">
                                                                                    <Style.Setters>
                                                                                        <Setter Property="Visibility" Value="Visible"/>
                                                                                    </Style.Setters>

                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding TokenRefreshStatus}" Value="TokenIsRefreshing">
                                                                                            <DataTrigger.Setters>
                                                                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                                                            </DataTrigger.Setters>
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </TextBlock.Style>

                                                                        </TextBlock>

                                                                        <fontawesome:IconImage 
                                                        Name="RefreshSessionButtonIconSpinner" 
                                                        Icon="Spinner" 
                                                        Foreground="DarkGray" 
                                                        Width="20" 
                                                        Height="20"
                                                        VerticalAlignment="Center"
                                                        HorizontalAlignment="Center">

                                                                            <Image.Style>
                                                                                <Style TargetType="Image">
                                                                                    <Style.Setters>
                                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                                        <Setter Property="LayoutTransform">
                                                                                            <Setter.Value>
                                                                                                <RotateTransform Angle="0" CenterX="0" CenterY="0" />
                                                                                            </Setter.Value>
                                                                                        </Setter>
                                                                                    </Style.Setters>

                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding TokenRefreshStatus}" Value="TokenIsRefreshing">
                                                                                            <DataTrigger.Setters>
                                                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                                            </DataTrigger.Setters>

                                                                                            <DataTrigger.EnterActions>
                                                                                                <BeginStoryboard
                                                                                x:Name="RefreshSessionButtonIconBeginStoryboard">
                                                                                                    <Storyboard>
                                                                                                        <DoubleAnimation
                                                                                            Storyboard.TargetProperty="(LayoutTransform).(RotateTransform.Angle)"
                                                                                            From="0"
                                                                                            To="360"
                                                                                            BeginTime="0:0:0.0"
                                                                                            Duration="0:0:1.150" 
                                                                                            AutoReverse="False"
                                                                                            RepeatBehavior="Forever">
                                                                                                        </DoubleAnimation>
                                                                                                    </Storyboard>
                                                                                                </BeginStoryboard>
                                                                                            </DataTrigger.EnterActions>

                                                                                            <DataTrigger.ExitActions>
                                                                                                <StopStoryboard BeginStoryboardName="RefreshSessionButtonIconBeginStoryboard" />
                                                                                            </DataTrigger.ExitActions>
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </Image.Style>

                                                                        </fontawesome:IconImage>
                                                                    </Grid>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style.Setters>

                                                        <Style.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Foreground" Value="White"/>
                                                                <Setter Property="Background" Value="{DynamicResource DefaultPrimaryButtonColor}"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>

                                            </Button>

                                        </Border>

                                        <Border
                        Grid.Row="1"
                        Background="Transparent"
                        Padding="5">

                                            <Button
                            Width="450"
                            Height="40"
                            HorizontalAlignment="Center"
                            Content="Не продлевать, выйти из аккаунта"
                            FontSize="14"
                            FontFamily="Arial"
                            FontWeight="SemiBold"
                            Command="{Binding closeRefreshSessionPanelCommand}">

                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Style.Setters>
                                                            <Setter Property="Template" Value="{StaticResource DefaultButtonTemplate}"/>
                                                            <Setter Property="Background" Value="{DynamicResource SecondaryBackColor}" />
                                                            <Setter Property="Foreground" Value="DarkGray" />
                                                            <Setter Property="Cursor" Value="Hand" />
                                                            <Setter Property="Content" Value="Текст" />
                                                            <Setter Property="Visibility" Value="Visible" />
                                                        </Style.Setters>

                                                        <Style.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Foreground" Value="White"/>
                                                                <Setter Property="Background" Value="{DynamicResource DefaultPrimaryButtonColor}"/>
                                                            </Trigger>

                                                            <DataTrigger Binding="{Binding TokenRefreshStatus}" Value="TokenIsRefreshing">
                                                                <DataTrigger.Setters>
                                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                                </DataTrigger.Setters>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>

                                            </Button>

                                        </Border>

                                    </Grid>

                                </Grid>

                            </Border>

                        </Popup>

                    </Grid>

                </Border>
                <!--#endregion-->

            </Grid>
        </Border>

    </Grid>

</Window>
